#!/bin/bash

# Run git with a variable identity depending on upstream

remote_info=$(git remote -v 2>/dev/null)

case $USER in
    lin)
        email=lin.sally.zhao@gmail.com
        name='Lin Zhao'
    ;;
    *)
        case $remote_info in
            *cdown/*|*zx2c4*|*suckless*|'') email=chris@chrisdown.name;;
        esac
        name='Chris Down'
    ;;
esac

export GIT_COMMITTER_EMAIL="$email"
export GIT_AUTHOR_EMAIL="$email"
export GIT_COMMITTER_NAME="$name"
export GIT_AUTHOR_NAME="$name"

exec git "$@"
