#!/bin/bash

: "${EMAIL?}"
: "${NOTMUCH_BASENAME?}"
: "${MAILDIR?}"

NOTMUCH_CONFIG="$HOME/.config/notmuch/$NOTMUCH_BASENAME"
export NOTMUCH_CONFIG

while :; do
    mutt
    # Sometimes Mutt segfaults (lol), in that case we should just restart
    # anyway
    # shellcheck disable=SC2181
    (( $? != 139 && $? != 0 )) && exit "$?"
done
