#!/bin/bash

youtube_running() {
    xwininfo -tree -root | grep -qai youtube
}
mpv_running() {
    pgrep -x mpv >/dev/null
}

echo 'Considering whether to lock'

if mpv_running || youtube_running; then
    echo 'Not running screensaver, media player running'
else
    printf 'Running screensaver:'
    printf ' %q' "$@"
    printf '\n'
    exec "$@"
fi
