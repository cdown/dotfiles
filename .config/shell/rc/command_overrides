# vim: ft=sh

# If noglob (for zsh) is not available, just make it a noop
if ! type noglob >/dev/null 2>&1; then
    alias noglob=''
fi

# GNU Coreutils that might not be installed with default names on OSX
alias grep="$(use_first_to_exist ggrep grep)"
alias ls="$(use_first_to_exist gls ls) --color=auto -p --group-directories-first"
alias sed="$(use_first_to_exist gsed sed)"
alias awk="$(use_first_to_exist gawk awk)"

# Apply git environment changes for variable author, and do not glob
alias git='noglob git-variable-author'

# Disable sourcing systemwide vim configuration
alias vim='vim -u ~/.vimrc -N'

# Commands that need to be reattached to the user namespace to access the
# clipboard from inside a tmux session
if type reattach-to-user-namespace >/dev/null 2>&1; then
    alias pbcopy='reattach-to-user-namespace pbcopy'
    alias pbpaste='reattach-to-user-namespace pbpaste'
    alias pass='reattach-to-user-namespace pass'
fi

# Do not disable raw control chars when running less
alias less='less -R'

# Do not pass a (potentially unsupported) locale when SSHing to random servers.
# In mosh, a UTF-8 aware locale is needed, so we use en_US.UTF-8 because
# there's a high likelihood that it will be available ('Murica baby!).
safe_termname() {
    case $TERM in
        rxvt*) echo rxvt ;;
        xterm*) echo xterm ;;
        *) echo linux ;;
    esac
}
alias ssh='LC_ALL=C TERM="$(safe_termname)" ssh'
alias mosh='LC_ALL=en_US.UTF-8 TERM="$(safe_termname)" mosh'

# Allow other aliases to be used after the program name
alias sudo='sudo '
alias watch='watch '
